debian:
  image: debian:testing
  stage: build
  before_script:
    - apt -y update
    - apt -y install gcc g++ gettext git libgnutls28-dev libgtk-3-dev
      libsystemd-dev libgtop2-dev meson sassc desktop-file-utils appstream-util
      gsettings-desktop-schemas-dev
  script:
    - meson --buildtype=release _build .
    - ninja -C _build

fedora:
  image: fedora:latest
  stage: build
  before_script:
    - dnf update -y --nogpgcheck
    - dnf install -y --nogpgcheck meson gettext glib2-devel gcc gcc-c++ git
      desktop-file-utils gperf "pkgconfig(gtk+-3.0)" libappstream-glib
      "pkgconfig(vte-2.91)" "pkgconfig(libgtop-2.0)" "pkgconfig(fribidi)"
      "pkgconfig(gnutls)" "pkgconfig(libsystemd)" "pkgconfig(libpcre2-8)"
      "pkgconfig(gsettings-desktop-schemas)" sassc
  script:
    - meson --buildtype=release -Dtests=true _build .
    - meson compile -C _build
    - meson test -C _build
